<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Video Editor - T·∫°o ph·ª• ƒë·ªÅ v√† l·ªìng ti·∫øng</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <div class="logo">
                    <i class="fas fa-video"></i>
                    <span>AI Video Editor</span>
                    <small style="color: #00d4ff; font-size: 10px; margin-left: 5px;">üé§ TTS Ready</small>
                </div>
            </div>
            <div class="header-center">
                <div class="project-info">
                    <span id="project-name">D·ª± √°n m·ªõi</span>
                </div>
            </div>
            <div class="header-right">
                <button class="btn btn-primary" id="export-btn" disabled>
                    <i class="fas fa-download"></i>
                    Xu·∫•t video
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Left Panel - Tools -->
            <div class="left-panel">
                <div class="tool-section">
                    <h3><i class="fas fa-cloud-upload-alt"></i> Upload Video</h3>
                    <div class="upload-area" id="upload-area">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>K√©o th·∫£ file video v√†o ƒë√¢y ho·∫∑c</p>
                        <button class="btn btn-secondary" id="select-file-btn">Ch·ªçn file</button>
                        <input type="file" id="video-input" accept="video/*" style="display: none;">
                        <div class="upload-info">
                            <small>H·ªó tr·ª£: MP4, AVI, MOV, MKV, WEBM (t·ªëi ƒëa 5GB)</small>
                        </div>
                    </div>
                </div>

                <div class="tool-section">
                    <h3><i class="fas fa-closed-captioning"></i> T·∫°o ph·ª• ƒë·ªÅ</h3>
                    <div class="subtitle-controls">
                        <div class="subtitle-settings">
                            <label>Model Whisper:</label>
                            <select id="whisper-model">
                                <option value="tiny">Tiny (nh·ªè nh·∫•t, nhanh)</option>
                                <option value="base">Base (c√¢n b·∫±ng)</option>
                                <option value="small">Small (t·ªët)</option>
                                <option value="medium">Medium (r·∫•t t·ªët)</option>
                                <option value="large">Large (xu·∫•t s·∫Øc)</option>
                                <option value="large-v3" selected>Large-v3 (t·ªët nh·∫•t)</option>
                            </select>
                        </div>
                        <div class="subtitle-settings">
                            <label>Ng√¥n ng·ªØ:</label>
                            <select id="subtitle-language">
                                <option value="auto">T·ª± ƒë·ªông ph√°t hi·ªán</option>
                                <option value="vi">Ti·∫øng Vi·ªát</option>
                                <option value="zh">‰∏≠Êñá (Ti·∫øng Trung)</option>
                                <option value="en">English</option>
                                <option value="ja">Êó•Êú¨Ë™û (Ti·∫øng Nh·∫≠t)</option>
                                <option value="ko">ÌïúÍµ≠Ïñ¥ (Ti·∫øng H√†n)</option>
                                <option value="th">‡πÑ‡∏ó‡∏¢ (Ti·∫øng Th√°i)</option>
                                <option value="fr">Fran√ßais</option>
                                <option value="es">Espa√±ol</option>
                                <option value="de">Deutsch</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" id="generate-subtitles-btn" disabled>
                            <i class="fas fa-magic"></i>
                            T·∫°o ph·ª• ƒë·ªÅ t·ª± ƒë·ªông
                        </button>
                        <div class="progress-container" id="subtitle-progress" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                            <span class="progress-text">0%</span>
                        </div>
                    </div>
                </div>

                <div class="tool-section">
                    <h3><i class="fas fa-rocket"></i> T·∫°o Video Ho√†n Ch·ªânh</h3>
                    <div class="main-action">
                        <div class="action-description">
                            <p><strong>M·ªôt n√∫t - L√†m t·∫•t c·∫£!</strong></p>
                            <ul style="margin: 10px 0; padding-left: 20px; font-size: 14px;">
                                <li>‚úÖ T·∫°o l·ªìng ti·∫øng AI t·ª´ ph·ª• ƒë·ªÅ</li>
                                <li>‚úÖ Gh√©p l·ªìng ti·∫øng v√†o video</li>
                                <li>‚úÖ Th√™m ph·ª• ƒë·ªÅ hi·ªÉn th·ªã</li>
                                <li>‚úÖ Xu·∫•t video ho√†n ch·ªânh</li>
                            </ul>
                        </div>
                        
                        <div class="quick-settings">
                            <div class="setting-row">
                                <label>Ch·ªçn gi·ªçng ƒë·ªçc AI:</label>
                                <select id="voice-selector" style="width: 100%; font-size: 14px;">
                                    <option value="">üîÑ ƒêang t·∫£i gi·ªçng ƒë·ªçc...</option>
                                </select>
                                <small id="voice-info" style="display: block; margin-top: 5px; color: #666; font-size: 12px;">
                                    Ch·ªçn t·ª´ 60+ gi·ªçng ƒë·ªçc AI ch·∫•t l∆∞·ª£ng cao
                                </small>
                            </div>
                            <div class="setting-row">
                                <label>L·ªçc theo:</label>
                                <div style="display: flex; gap: 10px; align-items: center;">
                                    <select id="voice-provider-filter" style="flex: 1;">
                                        <option value="">üé§ T·∫•t c·∫£ providers</option>
                                        <option value="gtts">üÜì gTTS (Mi·ªÖn ph√≠)</option>
                                        <option value="edge_tts">üÜì Edge TTS (Mi·ªÖn ph√≠)</option>
                                        <option value="openai_tts">üü° OpenAI (Premium)</option>
                                        <option value="elevenlabs">üü† ElevenLabs (Ultra)</option>
                                        <option value="google_tts">üü° Google Cloud (Premium)</option>
                                        <option value="azure_tts">üü° Azure (Premium)</option>
                                    </select>
                                    <select id="voice-language-filter" style="flex: 1;">
                                        <option value="">üåç T·∫•t c·∫£ ng√¥n ng·ªØ</option>
                                        <option value="vi">üáªüá≥ Ti·∫øng Vi·ªát</option>
                                        <option value="en">üá∫üá∏ English</option>
                                        <option value="zh">üá®üá≥ ‰∏≠Êñá</option>
                                        <option value="ja">üáØüáµ Êó•Êú¨Ë™û</option>
                                        <option value="ko">üá∞üá∑ ÌïúÍµ≠Ïñ¥</option>
                                        <option value="th">üáπüá≠ ‡πÑ‡∏ó‡∏¢</option>
                                        <option value="fr">üá´üá∑ Fran√ßais</option>
                                        <option value="es">üá™üá∏ Espa√±ol</option>
                                        <option value="de">üá©üá™ Deutsch</option>
                                        <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
                                        <option value="it">üáÆüáπ Italiano</option>
                                        <option value="pt">üáµüáπ Portugu√™s</option>
                                        <option value="ar">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                                        <option value="hi">üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                                        <option value="tr">üáπüá∑ T√ºrk√ße</option>
                                        <option value="pl">üáµüá± Polski</option>
                                        <option value="nl">üá≥üá± Nederlands</option>
                                        <option value="sv">üá∏üá™ Svenska</option>
                                        <option value="da">üá©üá∞ Dansk</option>
                                        <option value="no">üá≥üá¥ Norsk</option>
                                        <option value="fi">üá´üáÆ Suomi</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <button class="btn btn-success btn-large" id="create-video-with-voice-btn" disabled>
                            <i class="fas fa-magic"></i>
                            <span>T·∫†O VIDEO HO√ÄN CH·ªàNH</span>
                            <small>L·ªìng ti·∫øng + Ph·ª• ƒë·ªÅ + Xu·∫•t video</small>
                        </button>
                        
                        <div class="progress-container" id="combined-progress" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                            <span class="progress-text">0%</span>
                            <div class="progress-message" id="progress-message">ƒêang x·ª≠ l√Ω...</div>
                        </div>
                    </div>

                    <!-- Advanced Settings (Collapsible) -->
                    <details class="advanced-settings" style="margin-top: 15px;">
                        <summary style="cursor: pointer; color: #666; padding: 10px; background: #f8f9fa; border-radius: 5px;">
                            <i class="fas fa-cog"></i> C√†i ƒë·∫∑t n√¢ng cao (t√πy ch·ªçn)
                        </summary>
                        <div style="margin-top: 10px; padding: 15px; border: 1px solid #ddd; border-radius: 5px; background: #fafbfc;">
                            <div class="voice-settings">
                                <label>Ngu·ªìn ph·ª• ƒë·ªÅ:</label>
                                <div class="radio-group">
                                    <label class="radio-label">
                                        <input type="radio" name="subtitle-source" value="original" id="source-original" checked>
                                        <span class="radio-checkmark"></span>
                                        <span class="radio-text">
                                            <i class="fas fa-file-alt"></i>
                                            File .srt g·ªëc
                                        </span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="subtitle-source" value="timeline" id="source-timeline">
                                        <span class="radio-checkmark"></span>
                                        <span class="radio-text">
                                            <i class="fas fa-film"></i>
                                            Timeline ƒë√£ ch·ªânh s·ª≠a
                                        </span>
                                    </label>
                                </div>
                                <div class="source-info" id="source-info">
                                    <small><i class="fas fa-info-circle"></i> S·∫Ω s·ª≠ d·ª•ng file .srt g·ªëc ch∆∞a ch·ªânh s·ª≠a</small>
                                </div>
                            </div>
                            <div class="voice-settings">
                                <label>T·ªëc ƒë·ªô ƒë·ªçc:</label>
                                <div class="form-group">
                                                                                <input type="range" id="speech-rate" min="0.5" max="2.0" value="1.5" step="0.1">
                                            <span id="speech-rate-value">1.5x</span>
                                </div>
                                <small>T·ª´ 0.5x (ch·∫≠m) ƒë·∫øn 2.0x (nhanh)</small>
                            </div>
                            
                            <!-- Audio Mixing Settings -->
                            <div class="audio-mixing-settings" style="margin-top: 15px; padding: 15px; border: 1px solid #e0e0e0; border-radius: 5px; background: #f9f9f9;">
                                <h4 style="margin: 0 0 10px 0; color: #333; font-size: 14px;">
                                    <i class="fas fa-volume-up"></i> C√†i ƒë·∫∑t √¢m thanh
                                </h4>
                                
                                <div class="voice-settings">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="keep-original-audio" checked>
                                        <span class="checkmark"></span>
                                        Gi·ªØ l·∫°i √¢m thanh g·ªëc
                                    </label>
                                    <small style="display: block; margin-top: 5px; color: #666;">
                                        N·∫øu b·ªè ch·ªçn, video s·∫Ω ch·ªâ c√≥ l·ªìng ti·∫øng m·ªõi
                                    </small>
                                </div>
                                
                                <div class="audio-volume-controls" id="audio-volume-controls">
                                    <div class="voice-settings">
                                        <label>√Çm l∆∞·ª£ng √¢m thanh g·ªëc:</label>
                                        <div class="volume-control">
                                                                                    <input type="range" id="original-volume" min="0" max="100" step="5" value="10">
                                        <span id="original-volume-value">10%</span>
                                        </div>
                                        <small>Gi·∫£m √¢m thanh g·ªëc ƒë·ªÉ l·ªìng ti·∫øng r√µ h∆°n</small>
                                    </div>
                                    
                                    <div class="voice-settings">
                                        <label for="voice-volume">√Çm l∆∞·ª£ng l·ªìng ti·∫øng:</label>
                                        <div class="volume-control">
                                            <input type="range" id="voice-volume" min="1" max="100" value="83" step="1">
                                            <span id="voice-volume-value">83%</span>
                                        </div>
                                        <small>ƒêi·ªÅu ch·ªânh ƒë·ªÉ nghe r√µ c√¢u tho·∫°i ti·∫øng Vi·ªát</small>
                                    </div>
                                </div>
                                
                                <div class="audio-presets" style="margin-top: 10px;">
                                    <label>C√†i ƒë·∫∑t nhanh:</label>
                                    <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-top: 5px;">
                                        <button type="button" class="btn btn-sm btn-outline-secondary audio-preset" data-original="0" data-voice="100">
                                            <i class="fas fa-microphone"></i> Ch·ªâ l·ªìng ti·∫øng
                                        </button>
                                        <button type="button" class="btn btn-sm btn-outline-secondary audio-preset" data-original="20" data-voice="100">
                                            <i class="fas fa-balance-scale"></i> L·ªìng ti·∫øng ch√≠nh
                                        </button>
                                        <button type="button" class="btn btn-sm btn-outline-secondary audio-preset" data-original="50" data-voice="80">
                                            <i class="fas fa-equals"></i> C√¢n b·∫±ng
                                        </button>
                                        <button type="button" class="btn btn-sm btn-outline-secondary audio-preset" data-original="100" data-voice="0">
                                            <i class="fas fa-music"></i> Ch·ªâ √¢m thanh g·ªëc
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Advanced individual buttons -->
                            <div class="advanced-buttons" style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                                <button class="btn btn-outline-primary" id="generate-voice-btn" disabled>
                                    <i class="fas fa-volume-up"></i>
                                    Ch·ªâ t·∫°o l·ªìng ti·∫øng
                                </button>
                                <button class="btn btn-outline-secondary" id="create-final-video-btn" disabled>
                                    <i class="fas fa-film"></i>
                                    Ch·ªâ gh√©p video
                                </button>
                            </div>
                            
                            <div class="progress-container" id="voice-progress" style="display: none;">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 0%"></div>
                                </div>
                                <span class="progress-text">0%</span>
                            </div>
                        </div>
                    </details>
                </div>

                <div class="tool-section">
                    <h3><i class="fas fa-font"></i> T√πy ch·ªânh ph·ª• ƒë·ªÅ</h3>
                    <div class="subtitle-customization">
                        <div class="subtitle-font-settings">
                            <label>Font ch·ªØ:</label>
                            <select id="subtitle-font">
                                <option value="Arial">Arial</option>
                                <option value="Times New Roman">Times New Roman</option>
                                <option value="Helvetica">Helvetica</option>
                                <option value="Georgia">Georgia</option>
                                <option value="Verdana">Verdana</option>
                                <option value="Tahoma">Tahoma</option>
                                <option value="Comic Sans MS">Comic Sans MS</option>
                            </select>
                        </div>
                        <div class="subtitle-font-settings">
                            <label>K√≠ch th∆∞·ªõc:</label>
                            <div class="size-control">
                                <input type="range" id="subtitle-size" min="12" max="72" value="24">
                                <span id="subtitle-size-value">24px</span>
                            </div>
                        </div>
                        <div class="subtitle-font-settings">
                            <label>M√†u ch·ªØ:</label>
                            <div class="color-control">
                                <input type="color" id="subtitle-color" value="#ffffff">
                                <select id="subtitle-color-preset">
                                    <option value="#ffffff">Tr·∫Øng</option>
                                    <option value="#000000">ƒêen</option>
                                    <option value="#ffff00">V√†ng</option>
                                    <option value="#ff0000">ƒê·ªè</option>
                                    <option value="#00ff00">Xanh l√°</option>
                                    <option value="#0000ff">Xanh d∆∞∆°ng</option>
                                </select>
                            </div>
                        </div>
                        <div class="subtitle-font-settings">
                            <label>Ki·ªÉu ch·ªØ:</label>
                            <div class="style-controls">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="subtitle-bold">
                                    <span class="checkmark"></span>
                                    <strong>ƒê·∫≠m</strong>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="subtitle-italic">
                                    <span class="checkmark"></span>
                                    <em>Nghi√™ng</em>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="subtitle-outline" checked>
                                    <span class="checkmark"></span>
                                    Vi·ªÅn
                                </label>
                            </div>
                        </div>
                        <div class="subtitle-font-settings">
                            <label>V·ªã tr√≠ ph·ª• ƒë·ªÅ:</label>
                            <div class="position-controls">
                                <select id="subtitle-position">
                                    <option value="bottom">D∆∞·ªõi c√πng</option>
                                    <option value="middle">Gi·ªØa m√†n h√¨nh</option>
                                    <option value="top">Tr√™n c√πng</option>
                                </select>
                                <div class="position-fine-tune">
                                    <label>Vi ch·ªânh (px):</label>
                                    <input type="number" id="subtitle-offset" value="50" min="0" max="200">
                                </div>
                            </div>
                        </div>
                        <div class="subtitle-font-settings">
                            <label>CƒÉn l·ªÅ:</label>
                            <select id="subtitle-alignment">
                                <option value="center">Gi·ªØa</option>
                                <option value="left">Tr√°i</option>
                                <option value="right">Ph·∫£i</option>
                            </select>
                        </div>
                        <div class="subtitle-preview">
                            <h4>Xem tr∆∞·ªõc:</h4>
                            <div class="preview-box" id="subtitle-preview">
                                <span id="preview-text">Ph·ª• ƒë·ªÅ m·∫´u ƒë·ªÉ xem tr∆∞·ªõc</span>
                            </div>
                        </div>
                        <div class="positioning-controls">
                            <button class="btn btn-primary" id="toggle-positioning-btn">
                                <i class="fas fa-crosshairs"></i>
                                Ch·ªânh v·ªã tr√≠ tr√™n video
                            </button>
                            <button class="btn btn-secondary" id="reset-position-btn">
                                <i class="fas fa-undo"></i>
                                Reset v·ªã tr√≠
                            </button>
                        </div>
                        <button class="btn btn-secondary" id="apply-subtitle-style-btn">
                            <i class="fas fa-magic"></i>
                            √Åp d·ª•ng cho t·∫•t c·∫£
                        </button>
                    </div>
                </div>

                <div class="tool-section">
                    <h3><i class="fas fa-layer-group"></i> Thanh overlay t√πy ch·ªânh</h3>
                    <div class="overlay-controls">
                        <div class="overlay-enable">
                            <label class="checkbox-label">
                                <input type="checkbox" id="enable-overlay-bar">
                                <span class="checkmark"></span>
                                B·∫≠t thanh overlay
                            </label>
                            <small style="display: block; margin-top: 5px; color: #666;">
                                T·∫°o thanh ngang ƒë√® l√™n video (watermark, branding)
                            </small>
                        </div>
                        
                        <div class="overlay-settings" id="overlay-settings" style="display: none;">
                            <div class="overlay-dimension-settings">
                                <label>K√≠ch th∆∞·ªõc thanh:</label>
                                <div class="dimension-controls">
                                    <div class="dimension-group">
                                        <label>Chi·ªÅu r·ªông (%):</label>
                                        <div class="size-control">
                                            <input type="range" id="overlay-width" min="10" max="100" value="100">
                                            <span id="overlay-width-value">100%</span>
                                        </div>
                                    </div>
                                    <div class="dimension-group">
                                        <label>Chi·ªÅu cao (px):</label>
                                        <div class="size-control">
                                            <input type="range" id="overlay-height" min="20" max="200" value="60">
                                            <span id="overlay-height-value">60px</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="overlay-appearance-settings">
                                <label>M√†u n·ªÅn:</label>
                                <div class="color-control">
                                    <input type="color" id="overlay-bg-color" value="#000000">
                                    <select id="overlay-color-preset">
                                        <option value="#000000">ƒêen</option>
                                        <option value="#ffffff">Tr·∫Øng</option>
                                        <option value="#ff0000">ƒê·ªè</option>
                                        <option value="#00ff00">Xanh l√°</option>
                                        <option value="#0000ff">Xanh d∆∞∆°ng</option>
                                        <option value="#ffff00">V√†ng</option>
                                        <option value="#ff00ff">T√≠m</option>
                                        <option value="#00ffff">Cyan</option>
                                        <option value="#808080">X√°m</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="overlay-appearance-settings">
                                <label>ƒê·ªô trong su·ªët:</label>
                                <div class="size-control">
                                    <input type="range" id="overlay-opacity" min="0.1" max="1.0" value="0.8" step="0.1">
                                    <span id="overlay-opacity-value">80%</span>
                                </div>
                                <small>0% = trong su·ªët ho√†n to√†n, 100% = ƒë·∫∑c</small>
                            </div>
                            
                            <div class="overlay-effects-settings">
                                <label>Hi·ªáu ·ª©ng g√≥c v√† vi·ªÅn:</label>
                                <div class="effects-controls">
                                    <div class="effect-group">
                                        <label>Bo g√≥c (px):</label>
                                        <div class="size-control">
                                            <input type="range" id="overlay-border-radius" min="0" max="50" value="0">
                                            <span id="overlay-border-radius-value">0px</span>
                                        </div>
                                        <small>0 = g√≥c vu√¥ng, 50 = g√≥c tr√≤n ho√†n to√†n</small>
                                    </div>
                                    <div class="effect-group">
                                        <label>L√†m m·ªù g√≥c tr√°i/ph·∫£i (px):</label>
                                        <div class="size-control">
                                            <input type="range" id="overlay-blur" min="0" max="20" value="14">
                                            <span id="overlay-blur-value">14px</span>
                                        </div>
                                        <small>0 = g√≥c s·∫Øc n√©t, 20 = fade m·ªù d·∫ßn ·ªü 2 g√≥c</small>
                                    </div>
                                    <div class="effect-group">
                                        <label>ƒê·ªô d√†y vi·ªÅn (px):</label>
                                        <div class="size-control">
                                            <input type="range" id="overlay-border-width" min="0" max="10" value="0">
                                            <span id="overlay-border-width-value">0px</span>
                                        </div>
                                    </div>
                                    <div class="effect-group">
                                        <label>M√†u vi·ªÅn:</label>
                                        <div class="color-control">
                                            <input type="color" id="overlay-border-color" value="#ffffff">
                                            <select id="overlay-border-color-preset">
                                                <option value="#ffffff">Tr·∫Øng</option>
                                                <option value="#000000">ƒêen</option>
                                                <option value="#ff0000">ƒê·ªè</option>
                                                <option value="#00ff00">Xanh l√°</option>
                                                <option value="#0000ff">Xanh d∆∞∆°ng</option>
                                                <option value="#ffff00">V√†ng</option>
                                                <option value="#ff00ff">T√≠m</option>
                                                <option value="#00ffff">Cyan</option>
                                                <option value="#808080">X√°m</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="overlay-shadow-settings">
                                <label>Hi·ªáu ·ª©ng ƒë·ªï b√≥ng:</label>
                                <div class="shadow-controls">
                                    <div class="shadow-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="overlay-enable-shadow">
                                            <span class="checkmark"></span>
                                            B·∫≠t ƒë·ªï b√≥ng
                                        </label>
                                    </div>
                                    <div class="shadow-params" id="overlay-shadow-params" style="display: none;">
                                        <div class="shadow-param">
                                            <label>Kho·∫£ng c√°ch X (px):</label>
                                            <input type="number" id="overlay-shadow-x" value="2" min="-20" max="20">
                                        </div>
                                        <div class="shadow-param">
                                            <label>Kho·∫£ng c√°ch Y (px):</label>
                                            <input type="number" id="overlay-shadow-y" value="2" min="-20" max="20">
                                        </div>
                                        <div class="shadow-param">
                                            <label>ƒê·ªô m·ªù b√≥ng (px):</label>
                                            <div class="size-control">
                                                <input type="range" id="overlay-shadow-blur" min="0" max="20" value="5">
                                                <span id="overlay-shadow-blur-value">5px</span>
                                            </div>
                                        </div>
                                        <div class="shadow-param">
                                            <label>M√†u b√≥ng:</label>
                                            <input type="color" id="overlay-shadow-color" value="#000000">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="overlay-position-settings">
                                <label>V·ªã tr√≠ thanh:</label>
                                <select id="overlay-position">
                                    <option value="top">Tr√™n c√πng</option>
                                    <option value="middle">Gi·ªØa m√†n h√¨nh</option>
                                    <option value="bottom">D∆∞·ªõi c√πng</option>
                                </select>
                            </div>
                            
                            <div class="overlay-offset-settings">
                                <label>Vi ch·ªânh v·ªã tr√≠ (px):</label>
                                <input type="number" id="overlay-offset" value="0" min="-100" max="100">
                                <small>ƒêi·ªÅu ch·ªânh l√™n (+) ho·∫∑c xu·ªëng (-) t·ª´ v·ªã tr√≠ chu·∫©n</small>
                            </div>
                        </div>
                        
                        <div class="overlay-preview" id="overlay-preview-section" style="display: none;">
                            <h4>Xem tr∆∞·ªõc thanh overlay:</h4>
                            <div class="preview-overlay-box">
                                <div class="video-preview-mock">
                                    <div class="overlay-bar-preview" id="overlay-bar-preview">
                                        Thanh overlay demo
                                    </div>
                                    <div class="video-content-mock">
                                        <i class="fas fa-play-circle"></i>
                                        <span>N·ªôi dung video</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="overlay-actions">
                            <button class="btn btn-primary" id="preview-overlay-btn" disabled>
                                <i class="fas fa-eye"></i>
                                Xem tr∆∞·ªõc tr√™n video
                            </button>
                            <button class="btn btn-secondary" id="reset-overlay-btn">
                                <i class="fas fa-undo"></i>
                                Reset v·ªÅ m·∫∑c ƒë·ªãnh
                            </button>
                        </div>
                    </div>
                </div>

                <div class="tool-section">
                    <h3><i class="fas fa-cog"></i> T√πy ch·ªçn xu·∫•t</h3>
                    <div class="export-settings">
                        <label class="checkbox-label">
                            <input type="checkbox" id="include-subtitles" checked>
                            <span class="checkmark"></span>
                            Bao g·ªìm ph·ª• ƒë·ªÅ
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="include-voice">
                            <span class="checkmark"></span>
                            Bao g·ªìm l·ªìng ti·∫øng
                        </label>
                        <button class="btn btn-success" id="create-final-video-btn" disabled>
                            <i class="fas fa-play"></i>
                            T·∫°o video cu·ªëi c√πng
                        </button>
                        <div class="progress-container" id="final-progress" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                            <span class="progress-text">0%</span>
                        </div>
                    </div>
                </div>

                <div class="tool-section">
                    <h3><i class="fas fa-tools"></i> C√¥ng c·ª• kh√°c</h3>
                    <div class="utility-controls">
                        <button id="manual-cleanup-btn" class="btn btn-secondary btn-sm">
                            <i class="fas fa-broom"></i> D·ªçn d·∫πp file c≈©
                        </button>
                        <small style="display: block; margin-top: 5px; color: #666;">
                            X√≥a c√°c file t·∫°m th·ªùi ƒë·ªÉ gi·∫£i ph√≥ng dung l∆∞·ª£ng
                        </small>
                    </div>
                </div>
            </div>

            <!-- Center Panel - Video Preview -->
            <div class="center-panel">
                <div class="video-preview">
                    <div class="preview-container" id="preview-container">
                        <div class="no-video-message">
                            <i class="fas fa-video"></i>
                            <h3>Ch∆∞a c√≥ video</h3>
                            <p>Upload video ƒë·ªÉ b·∫Øt ƒë·∫ßu ch·ªânh s·ª≠a</p>
                        </div>
                        <div class="video-wrapper" id="video-wrapper" style="display: none;">
                            <video id="video-player" controls>
                                Your browser does not support the video tag.
                            </video>
                            <div class="subtitle-overlay" id="subtitle-overlay">
                                <div class="subtitle-text" id="subtitle-text" draggable="true">
                                    K√©o th·∫£ ƒë·ªÉ ch·ªânh v·ªã tr√≠ ph·ª• ƒë·ªÅ
                                </div>
                            </div>
                            <div class="positioning-guide" id="positioning-guide">
                                <div class="guide-lines">
                                    <div class="guide-line horizontal top"></div>
                                    <div class="guide-line horizontal middle"></div>
                                    <div class="guide-line horizontal bottom"></div>
                                    <div class="guide-line vertical left"></div>
                                    <div class="guide-line vertical center"></div>
                                    <div class="guide-line vertical right"></div>
                                </div>
                                <div class="position-info" id="position-info">
                                    X: 50%, Y: 90%
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="video-controls">
                        <div class="playback-controls">
                            <button class="control-btn" id="play-pause-btn" disabled>
                                <i class="fas fa-play"></i>
                            </button>
                            <button class="control-btn" id="stop-btn" disabled>
                                <i class="fas fa-stop"></i>
                            </button>
                            <span class="time-display">00:00 / 00:00</span>
                        </div>
                        <div class="volume-control">
                            <i class="fas fa-volume-up"></i>
                            <input type="range" id="volume-slider" min="0" max="100" value="100">
                        </div>
                    </div>
                    
                    <!-- Professional Timeline Editor -->
                    <div class="timeline-editor" id="timeline-editor" style="display: none;">
                        <div class="timeline-header">
                            <div class="timeline-title">
                                <i class="fas fa-film"></i>
                                <h4>Video Timeline Editor</h4>
                                <span class="timeline-subtitle">K√©o th·∫£ ƒë·ªÉ ch·ªânh s·ª≠a th·ªùi gian ph·ª• ƒë·ªÅ</span>
                            </div>
                            <div class="timeline-time-display" id="timeline-current-time">
                                00:00.000
                            </div>
                        </div>
                        
                        <div class="timeline-controls">
                            <div class="timeline-tools">
                                <button class="tool-btn active" id="select-tool" title="Select Tool">
                                    <i class="fas fa-mouse-pointer"></i>
                                </button>
                                <button class="tool-btn" id="cut-tool" title="Cut Tool">
                                    <i class="fas fa-cut"></i>
                                </button>
                                <button class="btn btn-primary btn-sm" id="load-all-subtitles-btn" title="Load t·∫•t c·∫£ ph·ª• ƒë·ªÅ l√™n timeline">
                                    <i class="fas fa-list"></i>
                                    Load All
                                </button>
                                <button class="btn btn-secondary btn-sm" id="debug-subtitles-btn" title="Debug subtitle data">
                                    <i class="fas fa-bug"></i>
                                    Debug
                                </button>
                                <button class="btn btn-warning btn-sm" id="fix-timeline-btn" title="S·ª≠a v·ªã tr√≠ timeline">
                                    <i class="fas fa-wrench"></i>
                                    Fix Position
                                </button>
                            </div>
                            
                            <div class="timeline-zoom">
                                <button class="btn btn-sm" id="zoom-out-btn" title="Thu nh·ªè (25-1000%)">-</button>
                                <span class="zoom-level" id="zoom-level-display">100%</span>
                                <button class="btn btn-sm" id="zoom-in-btn" title="Ph√≥ng to (25-1000%)">+</button>
                                <button class="btn btn-sm" id="fit-timeline-btn" title="V·ª´a kh√≠t c·ª≠a s·ªï">Fit</button>
                                <button class="btn btn-sm" id="zoom-reset-btn" title="Reset zoom v·ªÅ 100%">100%</button>
                            </div>
                        </div>
                        
                        <div class="timeline-container">
                            <div class="timeline-ruler" id="timeline-ruler">
                                <!-- Time markers -->
                            </div>
                            <div class="timeline-track" id="timeline-track">
                                <!-- Subtitle blocks -->
                            </div>
                            <div class="timeline-playhead" id="timeline-playhead"></div>
                        </div>
                        
                        <div class="timeline-actions">
                            <button class="btn btn-primary" id="play-from-cursor-btn">
                                <i class="fas fa-play"></i> Ph√°t t·ª´ cursor
                            </button>
                            <button class="btn btn-secondary" id="snap-to-grid-btn">
                                <i class="fas fa-th"></i> Snap Grid
                            </button>
                            <button class="btn btn-success" id="save-timeline-btn">
                                <i class="fas fa-save"></i> L∆∞u Timeline
                            </button>
                        </div>
                        
                        <div class="timeline-stats">
                            <div class="timeline-stat">
                                <i class="fas fa-list"></i>
                                <strong id="total-segments">0</strong> ph·ª• ƒë·ªÅ
                            </div>
                            <div class="timeline-stat">
                                <i class="fas fa-clock"></i>
                                T·ªïng: <strong id="total-duration">00:00</strong>
                            </div>
                            <div class="timeline-stat">
                                <i class="fas fa-check-square"></i>
                                Ch·ªçn: <strong id="selected-segment">Ch∆∞a ch·ªçn</strong>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Text Editor -->
            <div class="right-panel">
                <div class="text-editor">
                    <h3><i class="fas fa-edit"></i> Ch·ªânh s·ª≠a vƒÉn b·∫£n</h3>
                    <div class="editor-tabs">
                        <button class="tab-btn active" data-tab="subtitles">Ph·ª• ƒë·ªÅ</button>
                        <button class="tab-btn" data-tab="script">Script l·ªìng ti·∫øng</button>
                    </div>
                    
                    <div class="tab-content">
                        <div class="tab-panel active" id="subtitles-panel">
                            <textarea id="subtitles-text" placeholder="Ph·ª• ƒë·ªÅ s·∫Ω xu·∫•t hi·ªán ·ªü ƒë√¢y sau khi t·∫°o..."></textarea>
                            <div class="editor-actions">
                                <button class="btn btn-outline" id="download-srt-btn" disabled>
                                    <i class="fas fa-download"></i>
                                    T·∫£i .srt
                                </button>
                                <button class="btn btn-outline" id="upload-srt-btn">
                                    <i class="fas fa-upload"></i>
                                    Upload .srt
                                </button>
                                <button class="btn btn-outline" id="toggle-timeline-btn">
                                    <i class="fas fa-film"></i>
                                    Show Timeline
                                </button>
                                <input type="file" id="srt-input" accept=".srt" style="display: none;">
                            </div>
                        </div>
                        
                        <div class="tab-panel" id="script-panel">
                            <textarea id="script-text" placeholder="Nh·∫≠p vƒÉn b·∫£n ƒë·ªÉ t·∫°o l·ªìng ti·∫øng..."></textarea>
                            <div class="editor-actions">
                                <button class="btn btn-outline" id="preview-voice-btn" disabled>
                                    <i class="fas fa-play"></i>
                                    Nghe th·ª≠
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-info">
                <span id="status-text">S·∫µn s√†ng</span>
            </div>
            <div class="gpu-info">
                <i class="fas fa-microchip"></i>
                <span id="gpu-status">GPU: ƒêang ki·ªÉm tra...</span>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="spinner"></div>
            <h3>ƒêang x·ª≠ l√Ω...</h3>
            <p id="loading-text">Vui l√≤ng ƒë·ª£i trong gi√¢y l√°t</p>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification" style="display: none;">
        <div class="notification-content">
            <i class="notification-icon"></i>
            <span class="notification-text"></span>
            <button class="notification-close">&times;</button>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html> 